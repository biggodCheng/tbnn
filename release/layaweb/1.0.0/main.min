!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){n(1),n(2),n(3),n(4),n(5),n(6),n(7),n(8),n(9),n(10),n(11),n(12),n(13),n(14),n(15),n(16),n(17),n(18),n(19),n(20),n(21),n(22),n(23),n(24),n(25),n(26),n(27),n(28),n(29),n(30),n(31),n(32),t.exports=n(33)},function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=Laya.Event.CLICK,u={shadowAlpha:.7,autoClose:!1,closeOther:!0},c=function(t){function e(t){o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.data=t,n.CONFIG=u,n.init(t),n}return r(e,t),s(e,[{key:"init",value:function(t){var e,n=(e={},i(e,GAME_CMDS.CHATLIST,this.chatDetail),i(e,GAME_CMDS.EXPRESS,this.lookDetail),e);Sail.io.register(n,this),Sail.io.emit(GAME_CMDS.CHATLIST),Sail.io.emit(GAME_CMDS.EXPRESS),this.chattab.selectHandler=this.chatpage.setIndexHandler,this.chatList.vScrollBarSkin="",this.chatList.array=[],this.lookList.array=[],this.closeBtn.on(l,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),this.close()})}},{key:"chatDetail",value:function(t){for(var e=[],n=t||[],i=void 0,o=0;o<n.length;o++)i=0==o,e.push({chatbg:{visible:i},id:n[o].id,chat:n[o].content});this.chatList.array=e,this.chatList.selectHandler=Laya.Handler.create(this,this.chatIndex,null,!1)}},{key:"chatIndex",value:function(t){for(var e=0;e<this.chatList.length;e++)if(e==t){this.chatList.changeItem(e,{chatbg:{visible:!0},id:this.chatList.array[e].id,chat:this.chatList.array[e].content});var n=this.chatList.array[t].id,i={langId:n};Sail.io.emit(GAME_CMDS.SENDLANGUAGE,i),this.close()}else this.chatList.changeItem(e,{chatbg:{visible:!1},id:this.chatList.array[e].id,chat:this.chatList.array[e].content})}},{key:"lookDetail",value:function(t){for(var e=[],n=t||[],i=0;i<n.length;i++)e.push({select:{visible:void 0},img:n[i].url,id:n[i].id});this.lookList.array=e,this.lookList.selectHandler=Laya.Handler.create(this,this.LookIndex,null,!1)}},{key:"LookIndex",value:function(t){for(var e=0;e<this.lookList.length;e++)if(e==t){this.lookList.changeItem(e,{select:{visible:!0},id:this.lookList.array[e].id,img:this.lookList.array[e].url});var n=this.lookList.array[t].id,i={icoId:n};Sail.io.emit(GAME_CMDS.SENDEXPRESS,i),this.close()}else this.lookList.changeItem(e,{select:{visible:!1},id:this.lookList.array[e].id,img:this.lookList.array[e].url})}}]),e}(ui.alert.lookUI);Sail.class(c,"Alert.chat")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=Laya.Event.CLICK,l={shadowAlpha:.7,autoClose:!1,closeOther:!0,closeOnSide:!0},u=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.CONFIG=l,t.moneyNum=null,t.init(),t}return a(e,t),r(e,[{key:"init",value:function(){Sail.io.register(GAME_CMDS.USE_INFO,this,this.allmoney),Sail.io.emit(GAME_CMDS.USE_INFO),this.coin.on(s,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),this.showKeyboard()}),this.closeBtn.on(s,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),this.close()}),this.goon.on(s,this,function(){Laya.SoundManager.playSound("sound/btn.mp3");var t={amount:this.coin.text};this.coin.text>0?(Sail.io.emit(GAME_CMDS.CHARGEIN,t),this.close()):Sail.director.popScene(new Alert.Tip("带入的游戏币不能大于余额或小于等于0"))})}},{key:"allmoney",value:function(t){this.balance.text=t.platformAmount}},{key:"showKeyboard",value:function(){this.moneyNum=this.coin.text;var t={input:function(t){this.moneyNum=t},close:function(t,e){"confirm"==t&&(this.moneyNum=e,this.coin.text=this.moneyNum)}.bind(this)};Sail.keyboard.enter(this.coin.text,t)}},{key:"onClosed",value:function(){Sail.io.unregister(GAME_CMDS.USE_INFO,this,this.allmoney)}}]),e}(ui.alert.dragInUI);Sail.class(u,"Alert.dragin")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=Laya.Event.CLICK,l={shadowAlpha:.7,autoClose:!1,closeOther:!0},u={1:"欢乐值",2:"万里通积分",3:"欢乐豆",4:"彩金",5:"钻石",10:"健康金余额",9:"彩分"},c=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.data=t,n.CONFIG=l,n.init(t),n}return a(e,t),r(e,[{key:"init",value:function(t){this.gameCoin.text=t.amount,this.gainDate(t),this.closeBtn.on(s,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),this.close()}),this.sureBtn.on(s,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),Sail.io.emit(GAME_CMDS.CHANGROUT),this.close()}),this.gother.on(s,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),this.close(),GM.whereYxb&&GM.whereYxb()})}},{key:"gainDate",value:function(t){var e=this,n=t.details;this.textBox.height=30*n.length,n.forEach(function(t,n){if(t.amountAvailable>0){var i=new Laya.Label;i.size(425,30),i.align="left",i.font="Microsoft YaHei",i.fontSize=26,i.color="#faecc5";var o=u[t.accountType],a=t.amountAvailable;"4"!=t.accountType&&"5"!=t.accountType&&"9"!=t.accountType||(a/=500),i.text="等同于:    "+a+" "+o,i.y=30*n,e.textBox.addChild(i)}})}}]),e}(ui.alert.gainUI);Sail.class(c,"Alert.gain")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=Laya.Event.CLICK,l={shadowAlpha:.7,autoClose:!1,closeOther:!0},u=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.data=t,n.CONFIG=l,n.init(),n}return a(e,t),r(e,[{key:"init",value:function(t){Sail.io.register(GAME_CMDS.USER_RATE,this,this.uperRate),Sail.io.emit(GAME_CMDS.USER_RATE);new zsySlider(this.helpWarp);this.closeBtn.on(s,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),this.close()}),this.gogame.on(s,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),this.close()})}},{key:"uperRate",value:function(t){this.bomb.text=t.bomb+"倍",this.wu_hua.text=t.wu_hua+"倍",this.si_hua.text=t.si_hua+"倍",this.niu_niu.text=t.niu_niu+"倍",this.niu_ba.text=t.niu_ba+"倍",this.niu_yi.text=t.niu_yi+"倍",this.niu_lin.text=t.niu_lin+"倍"}},{key:"onClosed",value:function(){Sail.io.unregister(GAME_CMDS.USER_RATE,this,this.uperRate)}}]),e}(ui.alert.helpUI);Sail.class(u,"Alert.help")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=Laya.Event.CLICK,l={shadowAlpha:.7,autoClose:!1,closeOther:!0},u=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.data=t,n.CONFIG=l,n.type={win:1,lose:0},n.init(t),n}return a(e,t),r(e,[{key:"init",value:function(t){this.hisCard.array=[],this.closeBtn.on(s,this,function(){this.close(),Laya.SoundManager.playSound("sound/btn.mp3")}),this.historyData()}},{key:"historyData",value:function(){var t=[],e=this.data;if(0==e.length)this.noRecord.visible=!0;else{this.noRecord.visible=!1;for(var n=e||[],i=0;i<n.length;i++)t.push({item0:this.type[n[i].shun],item1:this.type[n[i].di],item2:this.type[n[i].tian],item3:this.type[n[i].xuan]});this.hisCard.array=t.reverse()}}}]),e}(ui.alert.hisrecordUI);Sail.class(u,"Alert.hisrecord")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(t){function e(t,n,a){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.init(t,n,a),r}return a(e,t),r(e,[{key:"init",value:function(t,e,n){this.label.changeText(t),this.callback=e,n&&"function"==typeof n&&n.call(this)}},{key:"onClosed",value:function(){this.callback&&this.callback()}}]),e}(ui.alert.tipsUI);Sail.class(s,"Alert.Message");!function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}a(e,t)}(Laya.Sprite)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=Laya.Event.CLICK,l={shadowAlpha:.7,autoClose:!1,closeOther:!0},u=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.uiLists=[],n.CONFIG=l,n.data=t,n.init(t),n}return a(e,t),r(e,[{key:"init",value:function(t){this.playList.vScrollBarSkin="",this.playList.array=[],this.closeBtn.on(s,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),this.close()}),this.showDetail(t)}},{key:"showDetail",value:function(t){var e=[],n=t||[];if(0==n.length)this.noRecord.visible=!0;else{this.noRecord.visible=!1,this.allNum.text=n.length;for(var i=0;i<n.length;i++)e.push({rank:i+1,userName:Sail.Utils.cutStr(n[i].userName,8),amount:n[i].amount});this.playList.array=e}}},{key:"enter",value:function(){}}]),e}(ui.alert.playlistUI);Sail.class(u,"Alert.playList")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=Laya.Event.CLICK,l=["操盘手","顺门","天门","地门","玄门"],u={CARD_TYPE_ZHA_DANG:"炸弹",CARD_TYPE_WU_HUA:"五花牛",CARD_TYPE_SI_HUA:"四花牛"},c={shadowAlpha:.7,autoClose:2e3,closeOther:!0},h=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.data=t,n.CONFIG=c,n.pooltext=null,n.amount=null,n.init(t),n}return a(e,t),r(e,[{key:"init",value:function(t){this.prizeData(t),this.closeBtn.on(s,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),this.close()}),this.prizesk.on(Laya.Event.STOPPED,this.prizesk,function(){Laya.SoundManager.playSound("sound/btn.mp3"),this.prizesk.play("prize",!1)})}},{key:"prizeData",value:function(t){var e=this,n=t||[];this.textBox.height=60*n.length,n.forEach(function(t,n){var i=new Laya.HTMLDivElement;i.size(570,50),i.style.align="center",i.style.fontSize=26;var o=l[t.areaId];i.innerHTML='<span style="color:#f7e98a;"> '+o+' </span><span style="color:#ffffff">开出</span><span style="color:#f7e98a;">'+u[t.cardType]+'</span><span style="color:#ffffff;">奖励</span><span style="color:#f7e98a;">'+t.amount+'</span><span style="color:#ffffff;">,恭喜'+o+"玩家!</span>",i.y=60*n,e.textBox.addChild(i)})}}]),e}(ui.alert.prizeUI);Sail.class(h,"Alert.prize")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=Laya.Event.CLICK,l={shadowAlpha:.7,autoClose:!1,closeOther:!0},u=function(t){function e(t,n){i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.data=t,a.id=null,a.init(t,n),a}return a(e,t),r(e,[{key:"init",value:function(t,e){this.propbg.index=0,this.id=t.id,this.animation.skin=t.img,this.price.text=t.price,this.on(s,this,function(){Laya.SoundManager.playSound("sound/btn.mp3");var t={sendAll:tbnn.dom.prop.sendAll,seatId:tbnn.dom.prop.seatId,itemId:this.id};Sail.io.emit(GAME_CMDS.SENDPROP,t),this.offAll(Laya.Event.CLICK),tbnn.dom.prop.close()})}}]),e}(ui.alert.propUserUI),c=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return tbnn.dom.prop=n,tbnn.dom.prop.sendAll=0,n.data=t,n.CONFIG=l,n.seatId=null,n.isAll=null,n.init(t),n}return a(e,t),r(e,[{key:"init",value:function(t){tbnn.dom.prop.seatId=t.userInfo.seatId,this.avater.skin=Sail.Utils.getAvatar(t.userInfo.userId),this.userName.text=Sail.Utils.cutStr(t.userInfo.userName,8),this.amount.text=t.userInfo.amount,this.propList.hScrollBarSkin="",this.propdata(t),this.closeBtn.on(s,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),this.close()}),this.haveseat.on(s,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),Sail.io.emit(GAME_CMDS.SIT_DOWN_USER,{seatId:this.seatId}),this.close()}),this.allselect.on(s,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),1==this.select.visible?(tbnn.dom.prop.sendAll=0,this.select.visible=!1):(tbnn.dom.prop.sendAll=1,this.select.visible=!0)})}},{key:"propdata",value:function(t){var e=this,n=t.propList,i=n||[];if(i.length>0)for(var o=0;o<i.length;o++){var a=new u(i[o],o);a.name="content",this.propList.addChild(a),a.pos(o%6*155,210*parseInt(o/6))}else this.noRecord.visible=!0;PROPUSER=this.getElementsByName(this,"content");for(var r=0;r<PROPUSER.length;r++)!function(t){PROPUSER[t].on(s,e,function(){for(var e=0;e<PROPUSER.length;e++)PROPUSER[e].propbg.index=0;PROPUSER[t].propbg.index=1})}(r)}},{key:"getElementsByName",value:function(t,e){var n=[];if(t.getChildByName&&t.getChildByName(e))for(var i=0;i<t.numChildren;i++)t.getChildAt(i).name==e&&n.push(t.getChildAt(i));for(var i=0;i<t.numChildren;i++)n=n.concat(this.getElementsByName(t.getChildAt(i),e));return n}}]),e}(ui.alert.propUI);Sail.class(c,"Alert.prop")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=Laya.Event.CLICK,l={shadowAlpha:.7,autoClose:!1,closeOther:!0},u=["10","50","100","500"],c=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.data=t,n.CONFIG=l,n.indexd=null,n.init(),n}return a(e,t),r(e,[{key:"init",value:function(){this.rechargeTab.selectedIndex=2,this.rechageNum.text=100;var t=this.rechargeTab.items;for(var e in t)t[e].getChildByName("value").text=u[e]+"元";this.rechargeTab.selectHandler=new Laya.Handler(this,function(t){Laya.SoundManager.playSound("sound/btn.mp3"),-1!=t&&(this.rechageNum.text=u[t])}),this.rechageNum.on(s,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),this.showKeyboard()}),this.closeBtn.on(s,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),this.close()}),this.rechargeBtn.on(s,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),this.rechageNum.text>0&&(this.gorechange(),this.close())})}},{key:"onKeyboardInput",value:function(t){this.rechageNum.text=t;for(var e in u)if(u[e]==t)return void(this.rechargeTab.selectedIndex=e);this.rechargeTab.selectedIndex=-1}},{key:"showKeyboard",value:function(){console.log(this.rechageNum);var t={length:8,input:this.onKeyboardInput.bind(this),close:function(t,e){"confirm"===t&&this.onKeyboardInput(e)}.bind(this)};Sail.keyboard.enter(this.rechageNum.text,t)}},{key:"gorechange",value:function(){var t="/?act=payment&gameId="+gameId+"&tradeName="+tradeName+"&amount="+this.rechageNum.text+"&platform="+platform+"&redirect_uri="+redirect_uri;window.location.href=t}}]),e}(ui.alert.rechargeUI);Sail.class(c,"Alert.recharge")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=Laya.Event.CLICK,l={shadowAlpha:.7,autoClose:!1,closeOther:!0},u=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.data=t,n.CONFIG=l,n.init(t),n}return a(e,t),r(e,[{key:"init",value:function(t){this.poolList.array=[],this.prizeList.array=[],this.closeBtn.on(s,this,function(){this.close(),Laya.SoundManager.playSound("sound/btn.mp3")}),this.quesBtn.on(s,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),Sail.director.popScene(new Alert.rules)}),this.poolData(t)}},{key:"poolData",value:function(t){this.poolAmount.text=t.totalAmount;for(var e=t.awardType,n=t.userList,i=[],o=[],a=0;a<e.length;a++){var r=void 0;"CARD_TYPE_ZHA_DANG"==e[a].card_type?r="炸弹":"CARD_TYPE_WU_HUA"==e[a].card_type?r="五花牛":"CARD_TYPE_SI_HUA"==e[a].card_type&&(r="四花牛"),i.push({card_type:{text:r},percent:e[a].percent+"%"})}this.poolList.array=i;for(var s=0;s<n.length;s++){var l=void 0;l=0==s?"res/alert/tiao.png":"res/alert/tiao2.png",o.push({bg:{skin:l},userAvater:Sail.Utils.getAvatar(n[s].user_id),username:Sail.Utils.cutStr(n[s].user_name,12),userAmount:n[s].award_amount})}this.prizeList.array=o}}]),e}(ui.alert.poolUI);Sail.class(u,"Alert.pool")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=Laya.Event.CLICK,l={closeOnSide:!0},u=!1,c=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.CONFIG=l,t.soundstatus=null,t.init(),t}return a(e,t),r(e,[{key:"init",value:function(){window.GM&&1===GM.isCall_out&&GM.noticeStatus_out&&GM.noticeStatus_out(function(t){t=t||{},t.isShowNotice&&(this.btnNotice.visible=!0,this.setbg.height=340,this.line2.visible=!0),t.isShowRedPoint&&(this.noticeDot.visible=!0)}.bind(this)),this.btnNotice.on(s,this,function(){window.GM&&GM.noticePopShow_out&&(Laya.SoundManager.playSound("sound/btn.mp3"),GM.noticePopShow_out())}),"false"==Sail.Utils.localStore.get("sound")&&(this.btnSound.index=0,this.soundicon.index=1),this.top=120,this.right=Laya.stage.width/750*2+20,this.onclick()}},{key:"initVoice",value:function(){this.soundstatus=!!SOUNDSTATUS.CUR,1==this.soundstatus?(this.btnSound.index=1,this.soundicon.index=0):(this.btnSound.index=0,this.soundicon.index=1),1!=u&&(u=!0,Laya.SoundManager.musicMuted=!this.soundstatus,Laya.SoundManager.soundMuted=!this.soundstatus)}},{key:"setVoiceStatus",value:function(){switch(SOUNDSTATUS.CUR){case SOUNDSTATUS.ON:SOUNDSTATUS.CUR=SOUNDSTATUS.OFF,Laya.SoundManager.musicMuted=!0,Laya.SoundManager.soundMuted=!0,Sail.Utils.localStore.set("sound",!1);break;case SOUNDSTATUS.OFF:SOUNDSTATUS.CUR=SOUNDSTATUS.ON,Laya.SoundManager.musicMuted=!1,Laya.SoundManager.soundMuted=!1,Sail.Utils.localStore.set("sound",!0)}this.initVoice()}},{key:"onclick",value:function(){this.btnSound.on(Laya.Event.CLICK,this,function(){0==this.btnSound.index?(this.btnSound.index=1,this.soundicon.index=0):(this.btnSound.index=0,this.soundicon.index=1),this.setVoiceStatus(),Laya.SoundManager.playSound("sound/btn.mp3")}),this.helpBtn.on(s,null,function(){Laya.SoundManager.playSound("sound/btn.mp3"),Sail.director.popScene(new Alert.help)})}},{key:"onResize",value:function(t,e){this.size(t,e)}},{key:"onexit",value:function(){}}]),e}(ui.alert.setUI);Sail.class(c,"Alert.Set")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.init(t),n}return a(e,t),r(e,[{key:"init",value:function(t){this.CONFIG={isModal:!0,autoClose:2e3,shadowAlpha:0,closeOther:!0,closeOnSide:!0},this.size(843,45);var e=new Laya.Image("res/alert/tips.png"),n=new Laya.Label;n.width=this.width,n.fontSize=30,n.y=5,n.font="simHei",n.color="#ffffff",n.align="center",n.changeText(t),this.addChildren(e,n)}}]),e}(Laya.Dialog);Sail.class(s,"Alert.Tip")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=Laya.Event.CLICK,l={shadowAlpha:.7,autoClose:!1,closeOther:!0},u=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.uiLists=[],n.CONFIG=l,n.data=t,n.init(t),n}return a(e,t),r(e,[{key:"init",value:function(t){this.zhuangList.vScrollBarSkin="",this.zhuangList.array=[],this.closeBtn.on(s,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),this.close()}),this.showDetail(t)}},{key:"showDetail",value:function(t){var e=[],n=t||[];if(0==n.length)this.noRecord.visible=!0,this.bankbox.visible=!1;else{this.noRecord.visible=!1,this.bankbox.visible=!0;for(var i=0;i<n.length;i++)console.log(n[i].name),e.push({rank:i+1,name:Sail.Utils.cutStr(n[i].name,8),amount:n[i].amount});this.zhuangList.array=e}}},{key:"enter",value:function(){}}]),e}(ui.alert.zhuangListUI);Sail.class(u,"Alert.graveList")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=Laya.Event.CLICK,l={closeOnSide:!0,shadowAlpha:.7},u=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.CONFIG=l,t.init(),t}return a(e,t),r(e,[{key:"init",value:function(){this.closeBtn.on(s,this,function(){this.close(),Laya.SoundManager.playSound("sound/btn.mp3")})}}]),e}(ui.alert.rulesUI);Sail.class(u,"Alert.rules")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=Laya.Event.CLICK,l={closeOnSide:!0,shadowAlpha:.7,autoClose:3e3,closeOther:!0},u=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.CONFIG=l,t.init(),t}return a(e,t),r(e,[{key:"init",value:function(){this.otherCoin.on(s,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),GM.whereYxb&&(GM.whereYxb(),this.close())})}}]),e}(ui.alert.cointipUI);Sail.class(u,"Alert.coinTip")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=Laya.Event.CLICK,l=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.init(t),n}return a(e,t),r(e,[{key:"init",value:function(t){this.prompMsg.text=t,this.surebtn.on(s,this,function(){Laya.SoundManager.playSound("sound/btn.mp3");var t=this.tips.selected?1:0;Sail.io.emit(GAME_CMDS.UPDATAPROMPT,{rpcId:t}),this.close()}),this.closeBtn.on(s,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),this.close()})}}]),e}(ui.alert.propMsgUI);Sail.class(l,"Alert.propMsg")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.init(),t}return a(e,t),r(e,[{key:"init",value:function(){Sail.Utils.addBtnSound(this),this.chatList=[],this.chatHandler=null,this.scrollBox.scrollRect=new Laya.Rectangle(-784,0,784,100),this.htmlContent.style.valign="top",this.htmlContent.style.fontSize=30,this.htmlContent.style.color="#ffffff",this.leftArrow.on(Laya.Event.CLICK,this,this.roll,[-1]),this.rightArrow.on(Laya.Event.CLICK,this,this.roll,[1]),this.chat.on(Laya.Event.CLICK,this,function(){Sail.director.popScene(new Alert.chat)}),this.userList.on(Laya.Event.CLICK,this,function(){Sail.io.emit(GAME_CMDS.PLAYLIST)}),this.plus.on(Laya.Event.CLICK,this,function(){Sail.director.popScene(new Alert.recharge)})}},{key:"roll",value:function(t){this.chipList.tweenTo(this.chipList.startIndex+t,200)}},{key:"initList",value:function(t,e){var n=null,i=this.chipList,o=[];t.forEach(function(t){o.push({amount:t})}),i.repeatX=t.length,i.hScrollBarSkin="",i.selectEnable=!0,i.array=o,i.selectHandler=Laya.Handler.create(this,function(t){n&&(n.getChildByName("button").skin="res/game/button2.png",n.getChildByName("amount").font="chip2");var e=i.getCell(t);e.getChildByName("button").skin="res/game/button1.png",e.getChildByName("amount").font="chip1",n=e,tbnn.data.betAmount=i.getCell(t).value},null,!1),i.renderHandler=Laya.Handler.create(this,function(t,e){var n=t.getChildByName("amount"),i=t.dataSource;t.value=i.amount,n.changeText(Sail.Utils.modifyNumber(i.amount))},null,!1),i.selectedIndex=t.indexOf(parseInt(e)),tbnn.data.betAmount=parseInt(e),i.scrollTo(i.selectedIndex-2)}},{key:"addChat",value:function(t,e){if(!(this.chatList.length>100)){var n="<span>【用户】"+t.userName+"说：";1==e?n+=t.content+"</span>":2==e?n+='</span><img src="'+t.url+'" style="width:50px;height:50px;"/>':3==e&&(n=t.content),this.chatList.push(n),1==this.chatList.length&&this.sendChat()}}},{key:"sendChat",value:function(){var t=this;if(0!=this.chatList.length){var e=this.chatList[0];this.chatBox.visible=!0,this.scrollBox.scrollRect.x=-784,this.htmlContent.innerHTML=e,this.chatHandler=Laya.Handler.create(this.scrollBox.scrollRect,function(){t.chatList.shift(),t.chatBox.visible=!1,t.sendChat()}),Laya.Tween.to(this.scrollBox.scrollRect,{x:784},11e3,null,this.chatHandler)}}},{key:"setUserInfo",value:function(t,e){this.avatar.skin=Sail.Utils.getAvatar(GM.user_id),this.userName.changeText(Sail.Utils.cutStr(e,8))}}]),e}(ui.game.bottomUI);Sail.class(s,"Com.Game.Bottom")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.minAmount=0,t.init(),tbnn.cp=t,t}return a(e,t),r(e,[{key:"init",value:function(){this.caopanType.labelFont="SimHei",this.bindEvent(),Sail.io.emit(GAME_CMDS.BANKER_UP_INIT)}},{key:"bindEvent",value:function(){Sail.Utils.addBtnSound(this),this.amount.on(Laya.Event.CLICK,this,function(){var t=this;Sail.keyboard.enter(this.amountValue.text,{input:function(e){t.amountValue.changeText(e)},close:function(e,n){"confirm"==e&&t.amountValue.changeText(n)}})}),this.times.on(Laya.Event.CLICK,this,function(){var t=this;Sail.keyboard.enter(this.timesValue.text,{input:function(e){t.timesValue.changeText(e)},close:function(e,n){"confirm"==e&&t.timesValue.changeText(n)},zero:!0})}),this.ensure.on(Laya.Event.CLICK,this,function(){var t=this.amountValue.text;if(t<this.minAmount)return void Sail.director.popScene(new Alert.Tip("不足最低操盘金额"));var e=this.caopanType.selectedIndex,n=0==e?this.timesValue.text:-1,i=this.goon.selected?1:0;Sail.io.emit(GAME_CMDS.BANKER_UP,{amount:t,times:n,goon:i})}),Sail.io.register(GAME_CMDS.BANKER_UP_INIT,this,this.dataInit)}},{key:"dataInit",value:function(t){this.minAmount=t.leastAmount,this.amountValue.changeText(t.leastAmount),this.leastAmount.changeText(t.leastAmount),this.timesValue.changeText(t.defaultTimes),this.maxTime.changeText("每次最长操盘时间"+t.maxTime+"分钟"),this.goon.selected=t.isContinue}},{key:"onClosed",value:function(){Sail.io.unregister(GAME_CMDS.BANKER_UP_INIT,this.dataInit)}}]),e}(ui.game.caopanUI);Sail.class(s,"Alert.Caopan")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s={D:0,C:1,H:2,S:3},l=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.init(),t}return a(e,t),r(e,[{key:"init",value:function(){}},{key:"setValue",value:function(t){var e=this.getChildByName("front"),n=t.substring(0,1),i=t.substring(1);"G"==n?(e.getChildByName("joker").visible=!0,e.getChildByName("icon").visible=!1,e.getChildByName("num").visible=!1,e.getChildByName("joker").skin="res/game/"+t.toLowerCase()+".png"):(e.getChildByName("joker").visible=!1,e.getChildByName("icon").visible=!0,e.getChildByName("num").visible=!0,e.getChildByName("icon").index=s[n],e.getChildByName("num").skin="S"==n||"C"==n?"res/game/poker_black.png":"res/game/poker_red.png",e.getChildByName("num").index=parseInt(i)-1)}},{key:"showBack",value:function(){this.getChildByName("back").visible=!0,this.getChildByName("front").visible=!1}},{key:"showFront",value:function(){this.getChildByName("back").visible=!1,this.getChildByName("front").visible=!0}}]),e}(ui.game.cardUI);Sail.class(l,"Com.Game.Card");var u=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.init(),t}return a(e,t),r(e,[{key:"init",value:function(){this.cards=[];for(var t=0;t<5;t++){var e=new Com.Game.Card;e.x=30*t,e.visible=!1,this.cards.push(e),this.addChild(e)}this.typeBg=new Laya.Image("res/game/type_bg.png"),this.typeBg.pos(-15,30),this.type=new Laya.Image,this.type.centerX=this.type.centerY=0,this.typeBg.addChild(this.type),this.addChild(this.typeBg)}},{key:"showCards",value:function(){var t=this;this.typeBg.visible=!1,this.cards.forEach(function(e,n){e.visible=!1,e.showBack(),t.timerOnce(200*n,t,function(){e.visible=!0})})}},{key:"setCardsVlaue",value:function(t){this.cards.forEach(function(e,n){e.setValue(t.num[n])});var e=this.typeValue=t.type.substring(10);this.type.skin="res/game/"+e+".png"}},{key:"showResult",value:function(){this.cards.forEach(function(t,e){t.showFront()}),this.typeBg.visible=!0;var t="sound/";switch(this.typeValue){case"NIU_NULL":t+="wu_niu";break;case"SI_HUA":t+="si_hua";break;case"WU_HUA":t+="wu_hua";break;case"ZHA_DANG":t+="si_zha";break;default:t+=this.typeValue,t=t.toLowerCase()}t+=".mp3",Laya.SoundManager.playSound(t)}},{key:"reset",value:function(){this.removeSelf(),Laya.Pool.recover("cardSet",this)}}]),e}(Laya.Box);Sail.class(u,"Com.Game.CardSet")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=Laya.Pool,a=function t(){i(this,t)};a.create5cards=function(t,e){var n=void 0,i=130;switch(e>0&&(i=370),e){case 0:n=570;break;case 1:n=150;break;case 2:n=400;break;case 3:n=650;break;case 4:n=900}var a=o.getItemByClass("cardSet",Com.Game.CardSet);return a.setCardsVlaue(t),a.pos(n,i),0==e&&tbnn.dom.top?tbnn.dom.top.addChild(a):tbnn.dom.table&&tbnn.dom.table.addChild(a),a.showCards(),a},Sail.class(a,"Com.Game.CardCtrl")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function t(){i(this,t)};o.COIN_SIGN="coin",o.coinFly=function(t,e,n,i){var a=tbnn.dom.table,r=tbnn.dom.gameScene.bottom,s=null;if(t<8){var l=tbnn.dom.table.seats[t];s=a.localToGlobal(new Laya.Point(l.x,l.y))}else 8==t?s=r.localToGlobal(new Laya.Point(r.avatar.x,r.avatar.y)):9==t&&(s=r.localToGlobal(new Laya.Point(r.userList.x,r.userList.y)));var u=tbnn.dom.table.areas[e],c=a.localToGlobal(new Laya.Point(u.x+180*Math.random(),u.y+40+90*Math.random())),h=Laya.Pool.getItemByCreateFun(o.COIN_SIGN,function(){return new Laya.Image("res/game/coin.png")});i||(tbnn.dom.coins[e].push(h),a.coinAmount[e+1]+=1),tbnn.dom.gameScene.addChild(h),h.pos(s.x,s.y);var f=n?0:300;Laya.Tween.to(h,{x:c.x,y:c.y},f,null,Laya.Handler.create(this,function(){(i||tbnn.dom.coins[e].length>200)&&(h.removeSelf(),Laya.Pool.recover(o.COIN_SIGN,h))})),n||Laya.SoundManager.playSound("sound/coin.mp3")},o.coinsRecover=function(t){for(var e=tbnn.dom.gameScene,n=e.top.localToGlobal(new Laya.Point(e.top.avatar.x,e.top.avatar.y)),i=e.bottom.localToGlobal(new Laya.Point(e.bottom.avatar.x,e.bottom.avatar.y)),a=0;a<4;a++)!function(a){var r=null;"lose"==t[e.orderList[a+1]].res?r=n:tbnn.data.areasBetFlags[a]&&(r=i),r&&function(t){var e=0;tbnn.dom.coins[a].forEach(function(n){setTimeout(function(){Laya.Tween.to(n,{x:t.x,y:t.y},300,null,Laya.Handler.create(this,function(){n.removeSelf(),Laya.Pool.recover(o.COIN_SIGN,n)},null,!1))},e),e+=5})}(r)}(a)},Sail.class(o,"Com.Game.CoinCtrl")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.CONFIG={autoClose:2e3},n.init(t),n}return a(e,t),r(e,[{key:"init",value:function(t){Sail.Utils.addBtnSound(this),this.userList.renderHandler=Laya.Handler.create(this,function(t,e){var n=t.dataSource;t.getChildByName("avatar").skin=Sail.Utils.getAvatar(n.userId),t.getChildByName("amount").changeText(n.amount),t.getChildByName("userName").changeText(Sail.Utils.cutStr(n.userName,8)),t.getChildByName("flag").skin="res/game/alert/"+e+".png"},null,!1),this.loadData(t),this.closeBtn.alpha=this.continue.alpha=this.amount.alpha=this.avatar.alpha=0,Laya.Tween.to(this.closeBtn,{alpha:1},500,null,null,400),Laya.Tween.to(this.continue,{alpha:1},300,null,null,1e3),Laya.Tween.to(this.amount,{alpha:1},300,null,null,800),Laya.Tween.to(this.avatar,{alpha:1},300,null,null,450),Laya.Tween.from(this.closeBtn,{rotation:-30},500,Laya.Ease.backOut,null,400),Laya.Tween.from(this.continue,{scaleX:3,scaleY:3},300,null,null,1e3),Laya.Tween.from(this.amount,{scaleX:3,scaleY:3},300,null,null,800),Laya.Tween.from(this.avatar,{scaleX:3,scaleY:3},300,null,null,450)}},{key:"loadData",value:function(t){var e=(t.preFive,t.myResult);1==e.ticketFlag&&(this.ticket.visible=!0,this.ticket.changeText("对局费："+e.ticketAmount)),this.avatar.skin=Sail.Utils.getAvatar(GM.user_id);e.amount,e.amount;this.amount.changeText(e.amount),this.userName.changeText(Sail.Utils.cutStr(e.userName,8)),this.userList.array=t.preFive,e.amount<0?(this.animation.play("lose"),Laya.SoundManager.playSound("sound/lose.mp3")):(this.animation.play("win"),Laya.SoundManager.playSound("sound/win.mp3"))}}]),e}(ui.game.resultUI);Sail.class(s,"Alert.ResultLayer")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=["shunAmount","tianAmount","diAmount","xuanAmount"],l=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.betInternal=!1,t.betData={1:0,2:0,3:0,4:0},t.coinAmount={1:0,2:0,3:0,4:0},t.init(),t}return a(e,t),r(e,[{key:"init",value:function(){this.progress.bar.pos(-4,5),this.coins=[],this.areas=[this.area1,this.area2,this.area3,this.area4],this.seats=[this.seat0,this.seat1,this.seat2,this.seat3,this.seat4,this.seat5,this.seat6,this.seat7],this.initAreas(),this.initSeats()}},{key:"initAreas",value:function(){var t=this;this.area1.tableName.skin="res/game/shun.png",this.area2.tableName.skin="res/game/tian.png",this.area3.tableName.skin="res/game/di.png",this.area4.tableName.skin="res/game/xuan.png",this.areas.forEach(function(e,n){e.on(Laya.Event.CLICK,t,function(){if(tbnn.data.isBanker)return void Sail.director.popScene(new Alert.Tip("操盘手不能投币"));if(tbnn.data.betAvailable){if(tbnn.data.leftAmount<tbnn.data.betAmount)return void Sail.director.popScene(new Alert.Tip("当前可投币总额不足"));if(Com.Game.CoinCtrl.coinFly(8,n),t.betInternal)t.betData[n+1]+=tbnn.data.betAmount;else{tbnn.data.firstbet&&(t.betData[n+1]+=tbnn.data.betAmount,tbnn.data.firstbet=!1);var e=0;t.timerOnce(250,t,function(){for(var n in t.betData)!function(n){t.timerOnce(e,t,function(){t.betData[n]&&Sail.io.emit(GAME_CMDS.BET_CALL,{areaId:n,amount:t.betData[n]}),t.betData[n]=0}),e+=250}(n)}),t.betInternal=!0}}}),e.myAmount.on(Laya.Event.CHANGE,t,function(t){""==t.myAmount.text||0==t.myAmount.text?t.myAmountLabel.visible=!1:t.myAmountLabel.visible=!0},[e])})}},{key:"initSeats",value:function(){var t=this;this.seats.forEach(function(e,n){e.empty.on(Laya.Event.CLICK,t,function(){Sail.io.emit(GAME_CMDS.SIT_DOWN_USER,{seatId:n+1})}),e.full.on(Laya.Event.CLICK,t,function(){Sail.io.emit(GAME_CMDS.GET_SEAT_USER_INFO,{seatId:n+1})})})}},{key:"setAvailableAmount",value:function(t){this.available.changeText("当前可投币总额："+t),t<10&&(this.countdown.visible=!1,this.waiting(2))}},{key:"setAreaAmount",value:function(t,e){var n=this;this.areas.forEach(function(i,o){var a=t[s[o]];if(a){i.amount.changeText(a);var r=Math.ceil(a/300)-n.coinAmount[o+1];n.coinAmount[o+1]=Math.ceil(a/300);for(var l=0;l<r;l++)Com.Game.CoinCtrl.coinFly(9,o,e)}t.myInfo&&(i.myAmount.text=t.myInfo[s[o]])})}},{key:"sitDown",value:function(t){var e=this.seats[t.seatId-1];e.empty.visible=!1,e.full.visible=!0;var n=Sail.Utils.transferNumberToK(t.amount);e.amount.changeText(n),e.pic.skin=Sail.Utils.getAvatar(t.userId),e.frame.visible=GM.user_id==t.userId,t.userId==GM.user_id&&(this.mySeat=e)}},{key:"standUp",value:function(t){var e=this.seats[t.seatId-1];t.content&&Sail.director.popScene(new Alert.Tip(t.content)),e.empty.visible=!0,e.full.visible=!1,e.frame.visible=!1,t.userId==GM.user_id&&(this.mySeat=null)}},{key:"updateMyAmount",value:function(t){this.mySeat&&this.mySeat.amount.changeText(Sail.Utils.transferNumberToK(t))}},{key:"showMultiple",value:function(t,e){var n=!1,i=t.settlement.myResult,o=this.areas[e].myAmount;if(i){var a=i.multiple,r=s[e];Array.isArray(a)&&a.forEach(function(t,i){r.substr(0,2)==t.area.substr(0,2)&&(o.text="x"+t.multiple+"  "+t.betAmont,n=!0,tbnn.data.areasBetFlags[e]=n)})}n||(o.text="没有投币")}},{key:"beginCountDown",value:function(t,e){if(t){tbnn.data.betAvailable=!0,this.countdown.visible=!0,this.count.changeText("");this.progress.value=t/e,this.countDownValue=t,this.countDownaction(e),this.timerLoop(1e3,this,this.countDownaction,[e])}}},{key:"countDownaction",value:function(t){this.count.changeText(this.countDownValue),this.countDownValue<=5&&0!=this.countDownValue&&Laya.SoundManager.playSound("sound/countdown.mp3"),Laya.Tween.to(this.progress,{value:this.countDownValue--/t},1e3),this.countDownValue<0&&this.stopCountDown()}},{key:"stopCountDown",value:function(){this.clearTimer(this,this.countDownaction),tbnn.data.betAvailable=!1,this.countdown.visible=!1,this.waiting(2)}},{key:"waiting",value:function(t){this.countdown.visible=!1,this.reminder.visible=!0;var e="";switch(t){case 0:this.reminder.visible=!1;break;case 1:e="等待玩家操盘...";break;case 2:e="等待发牌..."}this.reminder.changeText(e)}},{key:"resetTable",value:function(){this.coinAmount={1:0,2:0,3:0,4:0},this.reminder.visible=!1,this.areas.forEach(function(t,e){t.amount.changeText(0),t.myAmount.text=""}),tbnn.dom.coins.forEach(function(t){Array.isArray(t)&&t.forEach(function(t){t.removeSelf(),Laya.Pool.recover(Com.Game.CoinCtrl.COIN_SIGN,t)})}),tbnn.dom.coins=[[],[],[],[]]}},{key:"setSeatAmount",value:function(t,e){this.seats[t-1]&&this.seats[t-1].amount.changeText(Sail.Utils.transferNumberToK(e))}}]),e}(ui.game.tableUI);Sail.class(l,"Com.Game.Table")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return tbnn.dom.top=t,t.bankerType=0,t.bindEvent(),t}return a(e,t),r(e,[{key:"setBanker",value:function(t){t.bankerId?(this.bankerName.changeText(Sail.Utils.cutStr(t.bankerName,8)),this.avatar.skin=Sail.Utils.getAvatar(t.bankerId),this.gold.changeText(t.gameAmount),t.bankerId==userId&&(this.operate.skin="res/game/offbanker.png",this.bankerType=2,tbnn.data.isBanker=!0)):this.bankerName.changeText("虚位以待"),1==t.inBankerList&&this.inBankerList()}},{key:"bindEvent",value:function(){var t=this;Sail.Utils.addBtnSound(this),this.operate.on(Laya.Event.CLICK,this,function(){switch(t.bankerType){case 0:Sail.director.popScene(new Alert.Caopan);break;case 1:Sail.io.emit(GAME_CMDS.OUT_BANKER_LIST);break;case 2:Sail.io.emit(GAME_CMDS.BANKER_DOWN_USER)}}),this.back.on(Laya.Event.CLICK,this,function(){Sail.io.emit(GAME_CMDS.OUT_ROOM)}),this.record.on(Laya.Event.CLICK,this,function(){Sail.io.emit(GAME_CMDS.HISTORY_CARD)}),this.bankerList.on(Laya.Event.CLICK,this,function(){Sail.io.emit(GAME_CMDS.BANKER_LIST)}),this.setting.on(Laya.Event.CLICK,this,function(){Sail.director.popScene(new Alert.Set)}),this.poolArea.on(Laya.Event.CLICK,this,function(){Sail.io.emit(GAME_CMDS.POOL_INFO)})}},{key:"removeBanker",value:function(t){this.bankerName.changeText("虚位以待"),this.gold.changeText(""),this.avatar.skin="",userId==t&&(this.bankerType=0,this.operate.skin="res/game/operate.png",tbnn.data.isBanker=!1)}},{key:"setPool",value:function(t){function e(t,n){60==o&&this.clearTimer(this,e),this.pool.changeText(parseInt(n+t*o/60)),o++}var n=Number(this.pool.text),i=t-n,o=0;this.timerLoop(50,this,e,[i,n])}},{key:"inBankerList",value:function(){this.bankerType=1,this.operate.skin="res/game/offline.png"}},{key:"bankerDown",value:function(){this.bankerType=0,this.operate.skin="res/game/operate.png"}}]),e}(ui.game.topUI);Sail.class(s,"Com.Game.Top")},function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function(t){function e(){o(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return tbnn.dom.gameScene=t,t.orderList=["zhuangCard","shunCard","tianCard","diCard","xuanCard"],t.init(),t}return r(e,t),s(e,[{key:"init",value:function(){var t;this.size(Laya.stage.width,Laya.stage.height),this.ACTIONS=(t={},i(t,GAME_CMDS.ROUND_START,this.roundStart),i(t,GAME_CMDS.ROUND_OVER,this.showCards),i(t,GAME_CMDS.GET_ROOM_INFO,this.setRoomInfo),i(t,GAME_CMDS.BANKER_DOWN_ROOM,this.bankerDown),i(t,GAME_CMDS.BET_CALL,this.betCall),i(t,GAME_CMDS.BET_INFO,this.betInfo),i(t,GAME_CMDS.OUT_BANKER_LIST,this.outBankerList),i(t,GAME_CMDS.OUT_ROOM,this.outRoom),i(t,GAME_CMDS.HISTORY_CARD,this.hisData),i(t,GAME_CMDS.BANKER_LIST,this.bankerList),i(t,GAME_CMDS.POOL_INFO,this.poolInfo),i(t,GAME_CMDS.PLAYLIST,this.userList),i(t,GAME_CMDS.USE_INFO,this.userAmount),i(t,GAME_CMDS.SIT_DOWN_ROOM,this.sitDown),i(t,GAME_CMDS.BANKER_UP,this.bankerUp),i(t,GAME_CMDS.AWARD_POOL,this.saveAward),i(t,GAME_CMDS.SENDLANGUAGE,this.sendLanguage),i(t,GAME_CMDS.SENDEXPRESS,this.sendExpress),i(t,GAME_CMDS.GET_SEAT_USER_INFO,this.seatUserInfo),i(t,GAME_CMDS.STAND_UP,this.standUp),i(t,GAME_CMDS.SENDPROP,this.sendProp),i(t,GAME_CMDS.SEAT_BET_CALL,this.seatBetCall),i(t,GAME_CMDS.NOTICE_MAIN,this.notice),t),Laya.loader.load(ASSETS.GAME,Laya.Handler.create(this,this.showMainview))}},{key:"onResize",value:function(t,e){this.size(t,e)}},{key:"onEnter",value:function(){}},{key:"onExit",value:function(){tbnn.dom.table=null,tbnn.dom.top=null,tbnn.dom.gameScene=null,this.bottom.chatHandler&&this.bottom.chatHandler.clear(),tbnn.dom.coins=[[],[],[],[]],this.destroy(),Laya.Pool.clearBySign(Com.Game.CoinCtrl.COIN_SIGN),Sail.io.unregister(this.ACTIONS,this)}},{key:"showMainview",value:function(){var t=new Laya.Image("res/game/bg.png");t.centerX=t.centerY=0;var e=this.top=new Com.Game.Top;e.top=0;var n=this.bottom=new Com.Game.Bottom;n.bottom=0;var i=this.table=new Com.Game.Table;tbnn.dom.table=i,i.centerX=0,i.centerY=20,this.addChildren(t,e,i,n),Sail.io.register(this.ACTIONS,this),Sail.io.emit(GAME_CMDS.GET_ROOM_INFO),Sail.io.emit(GAME_CMDS.USE_INFO,{type:"game"}),tbnn.data.autoSit&&Sail.io.emit(GAME_CMDS.SIT_DOWN_USER)}},{key:"setRoomInfo",value:function(t){var e=this.table;t.allChips,t.defaultChip;tbnn.data.betAvailable=t.betAvailable,this.top.setPool(t.poolAmount),e.setAvailableAmount(t.leftAmount),t.leftAmount&&(tbnn.data.leftAmount=t.leftAmount),e.setAreaAmount(t,!0),this.top.setBanker(t),this.bottom.initList(t.allChips,t.defaultChip);var n=t.seatInfo;for(var i in n)n[i].seatId=i,this.table.sitDown(n[i]);var o=t.baseInfo;o&&(tbnn.data.userHallInfo.avater=o.avater,this.bottom.setUserInfo(o.avater,o.userName)),t.leftTime||this.table.waiting(1),t.leftTime>0&&t.betTime&&this.table.beginCountDown(parseInt(t.leftTime/1e3),parseInt(t.betTime/1e3))}},{key:"roundStart",value:function(t){this.reStart(),this.table.beginCountDown(parseInt(t.betTime/1e3),parseInt(t.betTime/1e3)),this.top.setBanker(t),tbnn.data.betAvailable=!0}},{key:"showCards",value:function(t){var e=this;this.table.betInternal=!1,this.table.stopCountDown(),this.table.waiting(0),this.cardList=[];for(var n=t.cardInfo,i=0;i<5;i++)!function(i){e.timerOnce(1e3*i,e,function(){this.cardList.push(Com.Game.CardCtrl.create5cards(n[this.orderList[i]],i)),4==i&&this.timerOnce(1e3,this,this.showResult,[t])})}(i)}},{key:"showResult",value:function(t){var e=this;t.cardInfo;this.cardList.forEach(function(n,i){e.timerOnce(1e3*i,e,function(){n.showResult(),i>0&&e.table.showMultiple(t,i-1)})}),this.timerOnce(1e3*this.cardList.length,this,function(){Com.Game.CoinCtrl.coinsRecover(t.cardInfo)}),t.settlement&&t.settlement.myResult&&0!=Object.keys(t.settlement.myResult)?this.timerOnce(1e3*this.cardList.length+1e3,this,function(){t.poolAmount&&e.top.setPool(t.poolAmount),Sail.director.popScene(new Alert.ResultLayer(t.settlement)),Sail.io.emit(GAME_CMDS.USE_INFO,{type:"game"}),window.GM&&GM.socket_RJ&&GM.socket_RJ.exec&&(GM.socket_RJ.exec(),Sail.io.emit(GAME_CMDS.USE_INFO))}):this.timerOnce(1e3*this.cardList.length+1e3,this,function(){t.poolAmount&&e.top.setPool(t.poolAmount)}),this.timerOnce(1e3*this.cardList.length+3e3,this,function(){tbnn.data.award&&Sail.director.popScene(new Alert.prize(tbnn.data.award)),tbnn.data.award=null}),this.timerOnce(1e3*this.cardList.length+5e3,this,function(){e.reStart()})}},{key:"bankerUp",value:function(t){this.top.setBanker(t)}},{key:"bankerDown",value:function(t){this.table.waiting(1),this.top.removeBanker(t.bankerId)}},{key:"betCall",value:function(t,e){this.table.betInternal=!1,tbnn.data.firstbet=!0,this.table.setAreaAmount({myInfo:t},!0),this.bottom.amount.changeText(t.leftAmount)}},{key:"betInfo",value:function(t){tbnn.data.leftAmount=t.leftAmount,this.table.setAvailableAmount(t.leftAmount),this.table.setAreaAmount(t)}},{key:"reStart",value:function(){this.cardList&&this.cardList.forEach(function(t,e){t.reset()}),this.table.resetTable()}},{key:"outBankerList",value:function(){this.top.bankerDown()}},{key:"outRoom",value:function(){Sail.io.socket.end(),IO_CONFIG.URL=connectionUrl,Sail.io.socket.init(IO_CONFIG),Sail.director.runScene(new Scene.Hall)}},{key:"hisData",value:function(t){Sail.director.popScene(new Alert.hisrecord(t))}},{key:"bankerList",value:function(t){Sail.director.popScene(new Alert.graveList(t))}},{key:"poolInfo",value:function(t){Sail.director.popScene(new Alert.pool(t))}},{key:"userList",value:function(t){Sail.director.popScene(new Alert.playList(t))}},{key:"userAmount",value:function(t){this.bottom.amount.changeText(t.gameAmount),this.table.updateMyAmount(t.gameAmount)}},{key:"sitDown",value:function(t){this.table.sitDown(t)}},{key:"saveAward",value:function(t){tbnn.data.award=t}},{key:"sendLanguage",value:function(t){this.bottom.addChat(t,1)}},{key:"sendExpress",value:function(t){this.bottom.addChat(t,2)}},{key:"seatUserInfo",value:function(t){Sail.director.popScene(new Alert.prop(t))}},{key:"standUp",value:function(t){this.table.standUp(t)}},{key:"sendProp",value:function(t){var e=this,n=null,i=this.bottom,o=this.top;if(GM.user_id==t.originUid)n=i.localToGlobal(new Laya.Point(i.avatar.x,i.avatar.y));else if(0==t.originSeat)n=i.localToGlobal(new Laya.Point(i.userList.x,i.userList.y));else if(9==t.originSeat)n=o.localToGlobal(new Laya.Point(o.avatar.x,o.avatar.y));else{var a=this.table.seats[t.originSeat-1];n=this.table.localToGlobal(new Laya.Point(a.x,a.y))}Array.isArray(t.target)&&t.target.forEach(function(i,o){var a=new Laya.Clip(t.animation,1,7);a.pivotX=.5*a.clipWidth,a.pivotY=.5*a.clipHeight,a.interval=180,a.pos(n.x,n.y),e.addChild(a);var r=e.table.seats[i-1],s=e.table.localToGlobal(new Laya.Point(r.x-50,r.y-60));Laya.Tween.to(a,{x:s.x+16,y:s.y-10},1100,null,Laya.Handler.create(e,function(){e.timerOnce(a.interval*a.clipY,e,function(){a.dispose()}),a.play()},null,!1))})}},{key:"seatBetCall",value:function(t){t.userId!=GM.user_id&&Com.Game.CoinCtrl.coinFly(t.seatId-1,t.areaId-1),this.table.setSeatAmount(t.seatId,t.leftAmount)}},{key:"notice",value:function(t){this.bottom.addChat(t,3)}}]),e}(Sail.Scene);Sail.class(l,"Scene.Game")},function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=Laya.Event.CLICK,u=function(t){function e(){o(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.init(),t}return r(e,t),s(e,[{key:"init",value:function(){var t;this.login.visible=!0,this.backbtn.visible=!1,this.homebtn.visible=!1,this.centerX=0,this.y=-200,this.onclick();var e=(t={},i(t,GAME_CMDS.USE_INFO,this.infoDetail),i(t,GAME_CMDS.USERDETAIL,this.gaindata),i(t,GAME_CMDS.CHARGEIN,this.updata),i(t,GAME_CMDS.CHANGROUT,this.changeout),i(t,GAME_CMDS.USER_NAME,this.userInfo),t);Sail.io.register(e,this),Sail.io.emit(GAME_CMDS.USE_INFO)}},{key:"infoDetail",value:function(t){GM.userLogged&&(this.login.visible=!1),this.balance.text=Sail.Utils.transferNumberToK(t.platformAmount),this.gamecoin.text=Sail.Utils.transferNumberToK(t.gameAmount)}},{key:"updata",value:function(t){Sail.director.popScene(new Alert.Tip("带入游戏币成功")),t.promptMsg&&setTimeout(function(){Sail.director.popScene(new Alert.propMsg(t.promptMsg.content))},2e3),this.balance.text=Sail.Utils.transferNumberToK(t.platformAmount),this.gamecoin.text=Sail.Utils.transferNumberToK(t.gameAmount)}},{key:"userInfo",value:function(t){GM.userLogged&&(this.userName.text=Sail.Utils.cutStr(t.userName,12)),this.avatar.skin=Sail.Utils.getAvatar(GM.user_id)}},{key:"changeout",value:function(t){Sail.director.popScene(new Alert.Tip("收获成功")),this.balance.text=Sail.Utils.transferNumberToK(t.platformAmount),this.gamecoin.text=Sail.Utils.transferNumberToK(t.gameAmount)}},{key:"onclick",value:function(){window.GM&&1===GM.isCall_out&&GM.isShowBtnBack_out&&GM.btnBackCall_out&&(this.backbtn.visible=!0,this.backbtn.on(l,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),GM.btnBackCall_out()})),GM.backHomeUrl&&(this.homebtn.visible=!0,this.homebtn.on(l,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),location.href=GM.backHomeUrl})),this.yubtn.on(l,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),Sail.checkLogin()&&window.GM&&1===GM.isCall_out&&GM.popBalanceShow_out&&GM.popBalanceShow_out()}),this.setBtn.on(l,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),Sail.director.popScene(new Alert.Set)}),this.login.on(l,this,function(){location.href=GM.userLoginUrl,Laya.SoundManager.playSound("sound/btn.mp3")}),this.rechargebtn.on(l,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),Sail.checkLogin()&&Sail.director.popScene(new Alert.recharge)}),this.gain.on(l,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),Sail.checkLogin()&&Sail.io.emit(GAME_CMDS.USERDETAIL)})}},{key:"gaindata",value:function(t){t.amount>0?Sail.director.popScene(new Alert.gain(t)):Sail.director.popScene(new Alert.coinTip)}},{key:"enter",value:function(){Laya.Tween.to(this,{y:0,alpha:1},600,null,null,500)}}]),e}(ui.hall.headUI);Sail.class(u,"Com.hall.Header")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=Laya.Event.CLICK,l=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.init(),t}return a(e,t),r(e,[{key:"init",value:function(){this.size(560,121),this.bottom=0,this.right=-10,this.start.on(s,this,function(){Sail.checkLogin()&&(Laya.SoundManager.playSound("sound/btn.mp3"),Sail.io.emit(GAME_CMDS.INROOM))}),this.hand.on(Laya.Event.CLICK,this,function(){Laya.SoundManager.playSound("sound/btn.mp3"),Sail.checkLogin()&&Sail.director.popScene(new Alert.dragin)})}},{key:"enter",value:function(){}}]),e}(ui.hall.quickStartUI);Sail.class(l,"Com.hall.quickStart")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=Laya.Event.CLICK,l=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.roomId=null,n.init(t),n}return a(e,t),r(e,[{key:"init",value:function(t){this.size(332,111),this.right=20,this.index=t,this.centerY=120*(t-1),this.on(s,this,function(){if(Sail.checkLogin()){Laya.SoundManager.playSound("sound/btn.mp3");var t={roomId:this.roomId};Sail.io.emit(GAME_CMDS.INROOM,t)}})}},{key:"roomTable",value:function(t){this.roomId=t.roomId,this.userCount.text=t.userCount,this.roomNum.index=this.index,"fluent"==t.type?this.roomtype.index=0:"hot"==t.type&&(this.roomtype.index=1)}},{key:"enter",value:function(){}}]),e}(ui.hall.roomUI),u=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.uiLists=[],t.res=[],t.init(),t}return a(e,t),r(e,[{key:"init",value:function(){Sail.io.register(GAME_CMDS.ROOMlIST,this,this.RoomList),Sail.io.emit(GAME_CMDS.ROOMlIST),this.size(420,360),this.right=0}},{key:"RoomList",value:function(t){var e=this;this.res=t;this.res.forEach(function(t,n){if(!(n>3)){var i=new l(n);i.alpha=0,Laya.Tween.to(i,{y:20+120*n,alpha:1},500,Laya.Ease.backOut,null,300*n),e.uiLists.push(i),e.addChild(i)}});for(var n in this.uiLists)this.uiLists[n].roomTable(this.res[n]);Sail.io.emit(GAME_CMDS.USER_NAME),Sail.io.unregister(GAME_CMDS.ROOMlIST,this.RoomList)}}]),e}(Laya.Box);Sail.class(u,"Com.hall.roomTable")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=Laya.Event.CLICK,l=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.myRecod=[],t.tycoons=[],t.init(),t}return a(e,t),r(e,[{key:"init",value:function(){Sail.io.register(GAME_CMDS.RANK,this,this.Updata),Sail.io.emit(GAME_CMDS.RANK),this.rankTab.selectHandler=this.rankPage.setIndexHandler,this.yinList.array=[],this.yinList.vScrollBarSkin="",this.myRecord.vScrollBarSkin="",this.myRecord.array=[],this.rankTab.on(s,this,function(){this.rankTab.selectedIndex;Sail.io.emit(GAME_CMDS.RANK),Laya.SoundManager.playSound("sound/btn.mp3")})}},{key:"Updata",value:function(t){this.tycoons=t.tycoons,this.myRecod=t.myRecod,0==this.rankTab.selectedIndex?this.Rankdata():this.rankcord()}},{key:"Rankdata",value:function(){this.loginbox.visible=!1;var t=[],e=this.tycoons;0==e.length?this.rankNodata.visible=!0:this.rankNodata.visible=!1;for(var n=void 0,i=void 0,o=void 0,a=0;a<e.length;a++)a<3?(n="res/hall/numbg1.png",o="rankNum"):(n="res/hall/numbg.png",o="rankN"),i=1==e[a].self?1:0,t.push({allbg:i,avtar:Sail.Utils.getAvatar(e[a].userId),userName:Sail.Utils.cutStr(e[a].userName,10),winAll:e[a].winAll,rankNum:{text:a+1,font:o},rankbg:{skin:n}});this.yinList.array=t}},{key:"rankcord",value:function(){if(GM.userLogged){var t=[],e=this.myRecod;if(0==e.length)this.rankNodata.visible=!0;else{this.rankNodata.visible=!1;for(var n=0;n<e.length;n++)t.push({addTime:e[n].addTime,winAmount:e[n].winAmount});this.myRecord.array=t}}else this.loginbox.visible=!0,this.login.on(s,this,function(){Sail.checkLogin()})}},{key:"enter",value:function(){Laya.Tween.to(this,{y:Laya.stage.height/4,alpha:1},600,Laya.Ease.backOut,null,500)}},{key:"onResize",value:function(t,e){this.y=Laya.stage.height/4}}]),e}(ui.hall.rankUI);Sail.class(l,"Com.hall.rank")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=(Laya.Event.STOPPED,Sail.Utils),l=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.size(Laya.stage.width,Laya.stage.height),t.BGImg=null,t.Beaut=null,t.head=null,t.rank=null,t.roomBox=null,t.quick=null,t.init(),t}return a(e,t),r(e,[{key:"init",value:function(){Sail.io.register(GAME_CMDS.NEWUSER,this,this.newuser),Sail.io.register(GAME_CMDS.INROOM,this,this.inRoom),GM.userLogged?USER_LOGIN_STATUS=!0:USER_LOGIN_STATUS=!1,this.size(Laya.stage.width,Laya.stage.height);var t=new Laya.Image("res/hall/hallbg.jpg");t.anchorX=.5,t.anchorY=.5,t.pos(Laya.stage.width/2,Laya.stage.height/2),this.BGImg=t;var e=s.createSkeleton("res/dragon/man");e.play("man",!0),e.pos(Laya.stage.width/2-40,Laya.stage.height/2),this.Beaut=e;var n=new Com.hall.Header,i=new Com.hall.rank,o=new Com.hall.roomTable,a=new Com.hall.quickStart,r=new Laya.Box;r.size(520,600),i.y=Laya.stage.height/4-500,i.centerx=30,r.pos(Laya.stage.width/2+100,Laya.stage.height/5);a.y=800,a.hand.alpha=a.start.alpha=0,Laya.timer.once(300*o.uiLists.length,this,function(){Laya.Tween.to(a.hand,{alpha:1,scaleX:1.3,scaleY:1.3},100,null,Laya.Handler.create(this,function(){Laya.Tween.to(a.hand,{scaleX:1,scaleY:1},100)})),Laya.Tween.to(a.start,{alpha:1,scaleX:1.3,scaleY:1.3},100,null,Laya.Handler.create(this,function(){Laya.Tween.to(a.start,{scaleX:1,scaleY:1},100)}),200)}),r.addChildren(a,o),this.head=n,this.rank=i,this.quick=a,this.roomBox=r,this.addChildren(t,e,n,i,r)}},{key:"newuser",value:function(t){1==t.isNewUser&&Sail.director.popScene(new Alert.help)}},{key:"inRoom",value:function(t){Sail.io.socket.end(),IO_CONFIG.URL="https://"+t.host+":"+t.port+"/",Sail.io.socket.init(IO_CONFIG),tbnn.data.autoSit=!0,Sail.director.runScene(new Scene.Game)}},{key:"onEnter",value:function(){this.head.enter(),this.rank.enter()}},{key:"onExit",value:function(){Sail.io.unregister(GAME_CMDS.NEWUSER,this.newuser),Sail.io.unregister(GAME_CMDS.INROOM,this.inRoom)}},{key:"onResize",value:function(t,e){this.size(t,e),this.BGImg.y=e/2,this.roomBox.y=e/2-220,this.rank.y=e/2-200}}]),e}(Sail.Scene);Sail.class(l,"Scene.Hall")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(i)},l=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.init(),t}return a(e,t),r(e,[{key:"destroy",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this,!0)}},{key:"init",value:function(){if(this.centerX=0,this.bottom=120,laya.tools.monitorBackground(function(){Sail.director.popScene(new Alert.Message("当前网络不稳定！请刷新",function(){Sail.Utils.set_param("t",(new Date).getTime())})),Sail.io.socket.end(),laya.tools.monitorBackground(function(){})},4e3),laya.components&&laya.components.Isbn){var t=new laya.components.Isbn;this.addChild(t)}}},{key:"onProgress",value:function(t){var e=946*t;e>946&&(e=946),this.progress.value=t,this.percent.text=parseInt(100*t)+"%"}},{key:"load",value:function(t,e){Laya.loader.load(t,Laya.Handler.create(this,function(){e()},[e]),new Laya.Handler(this,this.onProgress))}}]),e}(ui.start.loadingUI);Sail.class(l,"Com.Start.Load")},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=Sail.Utils,l=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.proPreLoad=null,t.size(Laya.stage.width,Laya.stage.height),t}return a(e,t),r(e,[{key:"init",value:function(){var t=this;this.size(Laya.stage.width,Laya.stage.height);var e=new Laya.Image("res/loading/loadingbg.jpg");e.anchorX=.5,e.anchorY=.5,e.pos(Laya.stage.width/2,Laya.stage.height/2);var n=new Laya.Image("res/loading/fangcenmi.png");n.centerX=0,n.bottom=30;var i=s.createSkeleton("res/dragon/loadsk");i.play("loading",!0),i.pos(Laya.stage.width/2,Laya.stage.height/2-30),this.addChildren(e,n,i),this.showStaticProgress(),Sail.io.register(GAME_CMDS.IS_IN_ROOM,this,function(e){1==e.inRoom?t.proPreLoad.load(ASSETS.HALL,function(){Sail.io.socket.end(),IO_CONFIG.URL="https://"+e.host+":"+e.port+"/",Sail.io.socket.init(IO_CONFIG),Sail.director.runScene(new Scene.Game)}):0==e.inRoom&&(tbnn.data.userHallInfo=e,t.proPreLoad.load(ASSETS.HALL,function(){Sail.director.runScene(new Scene.Hall)}))}),GM.userLogged?Sail.io.emit(GAME_CMDS.IS_IN_ROOM):this.proPreLoad.load(ASSETS.HALL,function(){Sail.director.runScene(new Scene.Hall)})}},{key:"showStaticProgress",value:function(){var t=new Com.Start.Load;tbnn.dom.proPreLoad=t,this.proPreLoad=t,this.addChild(t)}},{key:"onEnter",value:function(){Laya.loader.load(ASSETS.PRELOAD,Laya.Handler.create(this,this.init))}},{key:"onExit",value:function(){tbnn.dom.proPreLoad=null,Laya.SoundManager.playMusic("sound/bgm.mp3",0)}},{key:"onResize",value:function(t,e){this.height=e}}]),e}(Sail.Scene);Sail.class(l,"Scene.Start")}]);